{"ast":null,"code":"var _jsxFileName = \"/Users/trungvo/javascript-stack/smart-money/client/src/common/ModalEdit.js\";\nimport React, { Component } from 'react';\nimport { Modal, Button, Form } from 'react-bootstrap';\nimport { InputGroup } from './InputGroup';\nimport DatePicker from \"react-datepicker\";\nimport { connect } from 'react-redux';\nimport { update_transaction } from '../actions/transactionActions';\nimport * as actions from '../actions/types';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport AlertMessage from '../common/AlertMessage';\nexport class ModalEdit extends Component {\n  constructor(props) {\n    super(props);\n\n    this.reset = nextProps => {\n      this.setState({\n        id: nextProps.transaction._id,\n        date: new Date(nextProps.transaction.date),\n        amount: nextProps.transaction.amount,\n        category: nextProps.transaction.category,\n        notes: nextProps.transaction.notes,\n        payee: nextProps.transaction.payee\n      });\n    };\n\n    this.handleChangeDate = date => {\n      this.setState({\n        date: date\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        show: false,\n        update_success: null\n      });\n    };\n\n    this.handleShow = () => {\n      this.setState({\n        show: true\n      });\n    };\n\n    this.clickUpdate = () => {\n      const _this$state = this.state,\n            date = _this$state.date,\n            amount = _this$state.amount;\n\n      if (date === null || date === '' || amount === '') {\n        this.setState({\n          show: true\n        });\n      } else {\n        this.setState({\n          show: false\n        });\n      }\n    };\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.updateTransaction = (e, bankAccount) => {\n      e.preventDefault();\n      const _this$state2 = this.state,\n            id = _this$state2.id,\n            date = _this$state2.date,\n            amount = _this$state2.amount,\n            category = _this$state2.category,\n            notes = _this$state2.notes,\n            payee = _this$state2.payee;\n\n      if (date === null || date === '' || amount === '') {\n        this.setState({\n          update_success: false\n        });\n      } else {\n        this.props.update_transaction({\n          id: id,\n          date: date === '' || date === null ? '' : date.toISOString().split('T')[0].replace(/-/g, '/'),\n          amount: amount,\n          category: category,\n          notes: notes,\n          payee: payee,\n          bankAccount: bankAccount\n        });\n      }\n    };\n\n    this.state = {\n      show: false,\n      id: '',\n      date: new Date(),\n      amount: '',\n      category: '',\n      notes: '',\n      payee: '',\n      update_success: null\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const errors = nextProps.errors,\n          success = nextProps.success;\n\n    if (errors.type !== actions.UPDATE_TRANSACTION) {\n      if (typeof nextProps.transaction !== 'undefined' && Object.keys(nextProps.transaction).length > 0) {\n        this.reset(nextProps);\n      }\n    }\n\n    if (success.type === actions.UPDATE_TRANSACTION) {\n      this.reset(nextProps);\n    }\n  }\n\n  render() {\n    const _this$props = this.props,\n          styles = _this$props.styles,\n          header = _this$props.header,\n          buttonText = _this$props.buttonText,\n          cancelBtn = _this$props.cancelBtn,\n          currency = _this$props.currency,\n          mainFuncBtn = _this$props.mainFuncBtn,\n          bankAccount = _this$props.bankAccount,\n          size = _this$props.size,\n          variant = _this$props.variant,\n          disabled = _this$props.disabled,\n          icon = _this$props.icon,\n          errors = _this$props.errors;\n    const _this$state3 = this.state,\n          date = _this$state3.date,\n          amount = _this$state3.amount,\n          category = _this$state3.category,\n          notes = _this$state3.notes,\n          payee = _this$state3.payee,\n          update_success = _this$state3.update_success;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: variant,\n      className: styles,\n      onClick: this.handleShow,\n      size: size,\n      disabled: disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: icon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"\\xA0\\xA0\"), buttonText), React.createElement(Modal, {\n      show: this.state.show,\n      onHide: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: icon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"\\xA0\\xA0\\xA0\"), header)), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, update_success === false ? React.createElement(AlertMessage, {\n      variant: 'danger',\n      message: 'Invalid date or amount',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }) : null, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Date\", React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"\\xA0*\\xA0\"), React.createElement(\"small\", {\n      className: \"text-muted\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"(yyyy/mm/dd)\")), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(DatePicker, {\n      dateFormat: \"yyyy/MM/dd\",\n      selected: date,\n      onChange: this.handleChangeDate,\n      className: errors.type === actions.UPDATE_TRANSACTION && typeof errors.errors.date !== 'undefined' && errors.errors.date !== '' ? '' : 'mb-4',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), errors.type === actions.UPDATE_TRANSACTION && typeof errors.errors.date !== 'undefined' && errors.errors.date !== '' && React.createElement(\"small\", {\n      className: \"form-text mb-4\",\n      style: {\n        color: 'red'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, errors.errors.date), React.createElement(InputGroup, {\n      htmlFor: \"amount\",\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Amount \", React.createElement(\"small\", {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"(\", currency, \")\"), \" \", React.createElement(\"span\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"*\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }), \" \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"small\", {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"+ for deposit, - for expense\"))),\n      type: \"amount\",\n      id: \"amount\",\n      name: \"amount\",\n      onChange: this.onChange,\n      value: amount,\n      placeholder: \"Enter amount\",\n      error: errors.type === actions.UPDATE_TRANSACTION && typeof errors.errors.amount !== 'undefined' && errors.errors.amount !== '' ? errors.errors.amount : false,\n      required: false,\n      iconType: 'money-bill-wave',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), React.createElement(InputGroup, {\n      htmlFor: \"category\",\n      label: \"Category\",\n      type: \"category\",\n      id: \"category\",\n      name: \"category\",\n      onChange: this.onChange,\n      value: category,\n      placeholder: \"Enter category\",\n      iconType: 'stream',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(InputGroup, {\n      htmlFor: \"notes\",\n      label: \"Notes\",\n      type: \"notes\",\n      id: \"notes\",\n      name: \"notes\",\n      onChange: this.onChange,\n      value: notes,\n      placeholder: \"Enter notes\",\n      iconType: 'comment-alt',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), React.createElement(InputGroup, {\n      htmlFor: \"payee\",\n      label: \"Payee\",\n      type: \"payee\",\n      id: \"payee\",\n      name: \"payee\",\n      onChange: this.onChange,\n      value: payee,\n      placeholder: \"Enter payee\",\n      iconType: 'user',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    })), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: e => this.updateTransaction(e, bankAccount),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      className: \"mr-2\",\n      type: \"submit\",\n      onClick: this.clickUpdate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, mainFuncBtn), React.createElement(Button, {\n      variant: \"secondary\",\n      type: \"button\",\n      onClick: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, cancelBtn)))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  errors: state.errors,\n  success: state.success\n});\n\nexport default connect(mapStateToProps, {\n  update_transaction\n})(ModalEdit);","map":{"version":3,"sources":["/Users/trungvo/javascript-stack/smart-money/client/src/common/ModalEdit.js"],"names":["React","Component","Modal","Button","Form","InputGroup","DatePicker","connect","update_transaction","actions","AlertMessage","ModalEdit","constructor","props","reset","nextProps","setState","id","transaction","_id","date","Date","amount","category","notes","payee","handleChangeDate","handleClose","show","update_success","handleShow","clickUpdate","state","onChange","e","target","name","value","updateTransaction","bankAccount","preventDefault","toISOString","split","replace","componentWillReceiveProps","errors","success","type","UPDATE_TRANSACTION","Object","keys","length","render","styles","header","buttonText","cancelBtn","currency","mainFuncBtn","size","variant","disabled","icon","color","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Modal, Button, Form } from 'react-bootstrap';\nimport { InputGroup } from './InputGroup';\nimport DatePicker from \"react-datepicker\";\nimport { connect } from 'react-redux';\nimport { update_transaction } from '../actions/transactionActions';\nimport * as actions from '../actions/types';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport AlertMessage from '../common/AlertMessage';\n\nexport class ModalEdit extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      show: false,\n      id: '',\n      date: new Date(),\n      amount: '',\n      category: '',\n      notes: '',\n      payee: '',\n      update_success: null\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { errors, success} = nextProps;\n\n    if (errors.type !== actions.UPDATE_TRANSACTION) {\n      if (typeof nextProps.transaction !== 'undefined' && Object.keys(nextProps.transaction).length > 0) {\n        this.reset(nextProps);\n      }\n    }\n\n    if (success.type === actions.UPDATE_TRANSACTION) {\n      this.reset(nextProps);\n    }\n  }\n\n  reset = (nextProps) => {\n    this.setState({\n      id: nextProps.transaction._id,\n      date: new Date(nextProps.transaction.date),\n      amount: nextProps.transaction.amount,\n      category: nextProps.transaction.category,\n      notes: nextProps.transaction.notes,\n      payee: nextProps.transaction.payee\n    })\n  }\n\n  handleChangeDate = (date) => {\n    this.setState({\n      date: date\n    });\n  }\n\n  handleClose = () => {\n    this.setState({ show: false, update_success: null });\n  }\n\n  handleShow = () => {\n    this.setState({ show: true });\n  }\n\n  clickUpdate = () => {\n    const { date, amount } = this.state;\n    if (date === null || date === '' || amount === '') {\n      this.setState({ show: true })\n    } else {\n      this.setState({ show: false })\n    }\n  }\n\n  onChange = (e) => {\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n\n  updateTransaction = (e, bankAccount) => {\n    e.preventDefault();\n    const {id, date, amount, category, notes, payee} = this.state;\n    if (date === null || date === '' || amount === '') {\n      this.setState({\n        update_success: false\n      })\n    } else {\n      this.props.update_transaction({\n        id: id,\n        date: date === '' || date === null ? '' : date.toISOString().split('T')[0].replace(/-/g, '/'),\n        amount: amount,\n        category: category,\n        notes: notes,\n        payee: payee,\n        bankAccount: bankAccount\n      });\n    }\n  }\n\n\n  render() {\n    const { styles, header, buttonText, cancelBtn, currency,\n      mainFuncBtn, bankAccount, size, variant, disabled, icon, errors } = this.props;\n\n    const { date, amount, category, notes, payee, update_success } = this.state;\n\n    return (\n      <div>\n        <Button variant={variant} className={styles} onClick={this.handleShow} size={size} disabled={disabled} >\n          <i className={icon}>&nbsp;&nbsp;</i>{buttonText}\n        </Button>\n\n        <Modal show={this.state.show} onHide={this.handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title>\n              <i className={icon}></i>\n              <span>&nbsp;&nbsp;&nbsp;</span>{header}\n            </Modal.Title>\n          </Modal.Header>\n\n          <Modal.Body>\n            {\n              update_success === false ?\n              <AlertMessage variant={'danger'} message={'Invalid date or amount'} /> : null\n            }\n\n            <label>Date \n              <span style={{ color: 'red' }}>&nbsp;*&nbsp;</span>\n              <small className='text-muted'>(yyyy/mm/dd)</small>\n            </label> <br />\n            <DatePicker\n              dateFormat=\"yyyy/MM/dd\"\n              selected={date}\n              onChange={this.handleChangeDate}\n              className={\n                errors.type === actions.UPDATE_TRANSACTION \n                && typeof errors.errors.date !== 'undefined'\n                && errors.errors.date !== '' ?\n                '' : 'mb-4'\n              }\n            />\n            {\n              (errors.type === actions.UPDATE_TRANSACTION \n                && typeof errors.errors.date !== 'undefined'\n                && errors.errors.date !== '') && <small className=\"form-text mb-4\" style={{ color: 'red' }}>{errors.errors.date}</small>\n            }\n\n            <InputGroup\n              htmlFor=\"amount\"\n              label={<span><span>Amount <small className='text-muted'>({currency})</small> <span style={{ color: 'red' }}>*</span></span><br /> <span><small className='text-muted'>+ for deposit, - for expense</small></span></span>}\n              type=\"amount\"\n              id=\"amount\"\n              name=\"amount\"\n              onChange={this.onChange}\n              value={amount}\n              placeholder=\"Enter amount\"\n              error={\n                errors.type === actions.UPDATE_TRANSACTION\n                  && typeof errors.errors.amount !== 'undefined'\n                  && errors.errors.amount !== '' ?\n                errors.errors.amount : false\n              }\n              required={false}\n              iconType={'money-bill-wave'}\n            />\n            <InputGroup\n              htmlFor=\"category\"\n              label=\"Category\"\n              type=\"category\"\n              id=\"category\"\n              name=\"category\"\n              onChange={this.onChange}\n              value={category}\n              placeholder=\"Enter category\"\n              iconType={'stream'}\n            />\n            <InputGroup\n              htmlFor=\"notes\"\n              label=\"Notes\"\n              type=\"notes\"\n              id=\"notes\"\n              name=\"notes\"\n              onChange={this.onChange}\n              value={notes}\n              placeholder=\"Enter notes\"\n              iconType={'comment-alt'}\n            />\n            <InputGroup\n              htmlFor=\"payee\"\n              label=\"Payee\"\n              type=\"payee\"\n              id=\"payee\"\n              name=\"payee\"\n              onChange={this.onChange}\n              value={payee}\n              placeholder=\"Enter payee\"\n              iconType={'user'}\n            />\n          </Modal.Body>\n\n          <Modal.Footer>\n            <Form onSubmit={(e) => this.updateTransaction(e, bankAccount)}>\n              <Button variant=\"primary\" className=\"mr-2\" type=\"submit\" onClick={this.clickUpdate}>\n                {mainFuncBtn}\n              </Button>\n              <Button variant=\"secondary\" type=\"button\" onClick={this.handleClose}>\n                {cancelBtn}\n              </Button>\n            </Form>\n          </Modal.Footer>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  errors: state.errors,\n  success: state.success\n}) \n\nexport default connect(mapStateToProps, { update_transaction})(ModalEdit);\n"]},"metadata":{},"sourceType":"module"}
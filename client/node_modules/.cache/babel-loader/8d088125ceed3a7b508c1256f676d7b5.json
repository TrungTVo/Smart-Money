{"ast":null,"code":"var _jsxFileName = \"/Users/trungvo/javascript-stack/smart-money/client/src/tools/ManageAccounts.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport AddAccount from './AddAccount';\nimport { loadAccounts } from '../actions/accountActions';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport InputGroup from '../common/InputGroup';\nimport ModalDelete from '../common/ModalDelete';\nimport * as actions from '../actions/types';\nimport AlertMessage from '../common/AlertMessage';\n\nclass ManageAccounts extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      tabIndex: 0,\n      name: '',\n      currency: '',\n      balance: '',\n      budget: ''\n    };\n\n    this.select_bankAccount = tabIndex => {\n      const accounts = this.props.accounts;\n      this.setState({\n        tabIndex\n      }, () => {\n        // parse value info of this bank account into input fields\n        const tabIndex = this.state.tabIndex;\n\n        if (tabIndex < accounts.accounts.length) {\n          const select_account = accounts.accounts[tabIndex];\n          this.setState({\n            name: select_account.name,\n            currency: select_account.currency,\n            balance: select_account.balance,\n            budget: select_account.budget\n          });\n        }\n      });\n    };\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.updateAccount = () => {\n      const _this$state = this.state,\n            name = _this$state.name,\n            currency = _this$state.currency,\n            balance = _this$state.balance,\n            budget = _this$state.budget;\n      console.log(this.state);\n    };\n  }\n\n  componentDidMount() {\n    this.props.loadAccounts();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const accounts = nextProps.accounts;\n\n    if (accounts.accounts.length > 0) {\n      const default_account = accounts.accounts[0];\n\n      if (typeof default_account !== 'undefined' && Object.keys(default_account).length > 0) {\n        this.setState({\n          name: default_account.name,\n          currency: default_account.currency,\n          balance: default_account.balance,\n          budget: default_account.budget\n        });\n      }\n    }\n  }\n\n  render() {\n    const _this$props = this.props,\n          accounts = _this$props.accounts,\n          success = _this$props.success;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(AddAccount, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card card-header bg-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-pen\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"\\xA0\\xA0\"), \"Edit accounts\")), React.createElement(\"div\", {\n      className: \"card card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, (success.type === actions.DELETE_ACCOUNT || success.type === actions.UPDATE_ACCOUNT) && typeof success.success_msg !== 'undefined' && success.success_msg !== '' ? React.createElement(AlertMessage, {\n      message: success.success_msg,\n      variant: 'success',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }) : null, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"You currently have \", accounts.accounts.length, \" accounts.\"), React.createElement(Tabs, {\n      defaultFocus: true,\n      selectedIndex: this.state.tabIndex,\n      onSelect: tabIndex => this.select_bankAccount(tabIndex),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(TabList, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, accounts.accounts.map((account, i) => React.createElement(Tab, {\n      key: account._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, account.name))), accounts.accounts.map((account, i) => React.createElement(TabPanel, {\n      key: account._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(InputGroup, {\n      htmlFor: \"name\",\n      label: \"Name\",\n      type: \"name\",\n      id: \"name\",\n      name: \"name\",\n      required: true,\n      onChange: this.onChange,\n      value: account.name,\n      placeholder: \"Enter account name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-group row justify-content-start\",\n      style: {\n        'display': 'flex',\n        'alignItems': 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"currency\",\n      className: \"col-md-4 col-sm-6 col-xs-12 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Select currency: \", React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"*\")), React.createElement(\"div\", {\n      className: \"form-group col-md-7 col-sm-5 col-xs-12 mt-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      className: \"custom-select\",\n      id: \"currency\",\n      value: account.currency,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Select currency\"), React.createElement(\"option\", {\n      value: \"USD\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"USD\"), React.createElement(\"option\", {\n      value: \"VND\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"VND\"), React.createElement(\"option\", {\n      value: \"EUR\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"EUR\")))), React.createElement(InputGroup, {\n      htmlFor: \"balance\",\n      label: \"Balance\",\n      type: \"balance\",\n      id: \"balance\",\n      name: \"balance\",\n      required: true,\n      onChange: this.onChange,\n      value: account.balance,\n      placeholder: \"Enter account balance\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(InputGroup, {\n      htmlFor: \"budget\",\n      label: \"Budget\",\n      type: \"budget\",\n      id: \"budget\",\n      name: \"budget\",\n      required: false,\n      onChange: this.onChange,\n      value: account.budget,\n      placeholder: \"Enter budget\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"d-flex flex-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.updateAccount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-secondary mr-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Update\")), React.createElement(ModalDelete, {\n      disabled: false,\n      variant: \"danger\",\n      bankId: account._id,\n      type: actions.DELETE_ACCOUNT,\n      header: \"Delete account\",\n      body: \"Delete this bank account will permanently delete all your information and cannot be undone.  Are you sure you want to do this?\",\n      buttonText: \"Delete\",\n      cancelBtn: \"Close\",\n      yesBtn: \"Yes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }))))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  accounts: state.accounts,\n  success: state.success\n});\n\nexport default connect(mapStateToProps, {\n  loadAccounts\n})(ManageAccounts);","map":{"version":3,"sources":["/Users/trungvo/javascript-stack/smart-money/client/src/tools/ManageAccounts.js"],"names":["React","Component","connect","AddAccount","loadAccounts","Tab","Tabs","TabList","TabPanel","InputGroup","ModalDelete","actions","AlertMessage","ManageAccounts","state","tabIndex","name","currency","balance","budget","select_bankAccount","accounts","props","setState","length","select_account","onChange","e","target","id","value","updateAccount","console","log","componentDidMount","componentWillReceiveProps","nextProps","default_account","Object","keys","render","success","type","DELETE_ACCOUNT","UPDATE_ACCOUNT","success_msg","map","account","i","_id","color","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {connect} from 'react-redux';\nimport AddAccount from './AddAccount';\nimport {loadAccounts} from '../actions/accountActions';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport InputGroup from '../common/InputGroup';\nimport ModalDelete from '../common/ModalDelete';\nimport * as actions from '../actions/types';\nimport AlertMessage from '../common/AlertMessage';\n\nclass ManageAccounts extends Component {\n  state = {\n    tabIndex: 0,\n    name: '',\n    currency: '',\n    balance: '',\n    budget: '',\n  }\n\n  componentDidMount() {\n    this.props.loadAccounts();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {accounts} = nextProps;\n    if (accounts.accounts.length > 0) {\n      const default_account = accounts.accounts[0];\n      if (typeof default_account !== 'undefined' && Object.keys(default_account).length > 0) {\n        this.setState({\n          name: default_account.name,\n          currency: default_account.currency,\n          balance: default_account.balance,\n          budget: default_account.budget\n        })\n      }\n    }\n  }\n\n  select_bankAccount = (tabIndex) => {\n    const {accounts} = this.props;\n    this.setState({\n      tabIndex\n    }, () => {\n      // parse value info of this bank account into input fields\n      const {tabIndex} = this.state;\n      if (tabIndex < accounts.accounts.length) {\n        const select_account = accounts.accounts[tabIndex];\n        this.setState({\n          name: select_account.name,\n          currency: select_account.currency,\n          balance: select_account.balance,\n          budget: select_account.budget\n        })\n      }\n    })\n  }\n\n  onChange = (e) => {\n    this.setState({\n      [e.target.id]: e.target.value\n    })\n  }\n\n  updateAccount = () => {\n    const {name, currency, balance, budget} = this.state;\n    console.log(this.state);\n  }\n\n  render() {\n    const {accounts, success} = this.props;\n    \n    return (\n      <div>\n        <AddAccount /> <br/>\n        <div className=\"container\">\n          <div className='card card-header bg-light'>\n            <h4>\n              <i className='fas fa-pen'>&nbsp;&nbsp;</i>Edit accounts\n            </h4>\n          </div>\n          <div className='card card-body'>\n            {\n              (success.type === actions.DELETE_ACCOUNT || success.type === actions.UPDATE_ACCOUNT) && typeof success.success_msg !== 'undefined' && success.success_msg !== '' ?\n                <AlertMessage message={success.success_msg} variant={'success'} />\n                : null\n            }\n            <p>You currently have {accounts.accounts.length} accounts.</p>\n            <Tabs defaultFocus={true} selectedIndex={this.state.tabIndex} onSelect={tabIndex => this.select_bankAccount(tabIndex) }>\n              <TabList>\n                {\n                  accounts.accounts.map((account, i) =>\n                    <Tab key={account._id}>{account.name}</Tab>\n                  )\n                }\n              </TabList>\n              {\n                accounts.accounts.map((account, i) =>\n                  <TabPanel key={account._id} >\n                    <br />\n                    <InputGroup htmlFor=\"name\"\n                      label=\"Name\"\n                      type=\"name\"\n                      id=\"name\"\n                      name=\"name\"\n                      required={true}\n                      onChange={this.onChange}\n                      value={account.name}\n                      placeholder=\"Enter account name\" />\n\n\n                    <div className=\"form-group row justify-content-start\" style={{ 'display': 'flex', 'alignItems': 'center' }}>\n                      <label htmlFor=\"currency\" className=\"col-md-4 col-sm-6 col-xs-12 col-form-label\">\n                        Select currency: <span style={{ color: 'red' }}>*</span>\n                      </label>\n                      <div className=\"form-group col-md-7 col-sm-5 col-xs-12 mt-2\">\n                        <select className=\"custom-select\" id='currency' value={account.currency}\n                          onChange={this.onChange}>\n                          <option value=\"\">Select currency</option>\n                          <option value=\"USD\">USD</option>\n                          <option value=\"VND\">VND</option>\n                          <option value=\"EUR\">EUR</option>\n                        </select>\n                      </div>\n                    </div>\n\n                    <InputGroup htmlFor=\"balance\"\n                      label=\"Balance\"\n                      type=\"balance\"\n                      id=\"balance\"\n                      name=\"balance\"\n                      required={true}\n                      onChange={this.onChange}\n                      value={account.balance}\n                      placeholder=\"Enter account balance\" />\n\n                    <InputGroup htmlFor=\"budget\"\n                      label=\"Budget\"\n                      type=\"budget\"\n                      id=\"budget\"\n                      name=\"budget\"\n                      required={false}\n                      onChange={this.onChange}\n                      value={account.budget}\n                      placeholder=\"Enter budget\" />\n\n                    <div className='d-flex flex-row'>\n                      <form onSubmit={this.updateAccount}>\n                        <button type='submit' className='btn btn-secondary mr-2'>Update</button>\n                      </form>\n                      <ModalDelete\n                        disabled={false}\n                        variant='danger'\n                        bankId={account._id}\n                        type={actions.DELETE_ACCOUNT}\n                        header=\"Delete account\"\n                        body=\"Delete this bank account will permanently delete all your information and cannot be undone. \n                            Are you sure you want to do this?\"\n                        buttonText=\"Delete\"    \n                        cancelBtn=\"Close\"\n                        yesBtn=\"Yes\"\n                      />\n                    </div>\n                  </TabPanel>\n                )\n              }\n            </Tabs>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  accounts: state.accounts,\n  success: state.success\n})\n\nexport default connect(mapStateToProps, { loadAccounts})(ManageAccounts);\n"]},"metadata":{},"sourceType":"module"}